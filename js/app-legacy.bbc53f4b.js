(function(){var e={74784:function(e,n,t){"use strict";t(66992),t(88674),t(19601),t(17727);var a=t(70538),i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container",attrs:{id:"app"}},[t("router-view")],1)},o=[],r={name:"App"},s=r,c=t(1001),u=(0,c.Z)(s,i,o,!1,null,null,null),l=u.exports,p=t(78345),d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("hello-metamask"),t("casino-component")],1)},b=[],m=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"metamask-info"},[t("p",[e._v("Network: "+e._s(e.network))]),t("p",[e._v("Account: "+e._s(e.coinbase))]),t("p",[e._v("Polyjuice account "+e._s(e.polyjuiceAddress)+" ")]),t("p",[e._v(" Your balance ")]),t("p",[e._v("|| "+e._s(e.ckbBalance)+" CKB || "+e._s(e.ckETHBalance)+" ckETH "),t("button",{on:{click:e.toDeposit}},[e._v(" "+e._s(e.buttonName))])]),e.deposit?t("div",[t("p",[e._v(" 正在获取部署地址")]),t("div",{staticStyle:{width:"300px"}},[t("p",[e._v(e._s(e.ckL2Address))])]),e._m(0)]):e._e()])},y=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("p",[e._v(" 打开 "),t("a",{attrs:{target:"_blank",href:"https://force-bridge-dev.ckbapp.dev/"}},[e._v(" Force-bridge ")]),e._v(" 将上述地址粘贴到Recipient中,并稍等1～2min ")])}],f=t(94208),v=(t(35666),{1:"Main Net",2:"Deprecated Morden test network",3:"Ropsten test network",4:"Rinkeby test network",42:"Kovan test network",4447:"Truffle Develop Network",5777:"Ganache Blockchain","0x116e1":"Godwoken Testnet"}),w=t(20629),_=t(10869),h={name:"hello-metamask",data:function(){return{deposit:!1,ckL2Address:null}},methods:{toDeposit:function(){var e=this;return(0,f.Z)(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.deposit=!e.deposit,n.next=3,(new _.AddressTranslator).getLayer2DepositAddress(e.$store.state.web3.web3Instance(),e.coinbase);case 3:t=n.sent,e.ckL2Address=t.addressString;case 5:case"end":return n.stop()}}),n)})))()},getL2DepositAddress:function(){}},computed:(0,w.rn)({isInjected:function(e){return e.web3.isInjected},network:function(){return v[window.ethereum.chainId]},coinbase:function(e){return e.web3.coinbase},polyjuiceAddress:function(e){return e.web3.polyJuiceAddress},ckETHBalance:function(e){return e.web3.ckETH_balance},ckbBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.balance/1e8},buttonName:function(){return this.deposit?"Close":"Deposit"}})},g=h,k=(0,c.Z)(g,m,y,!1,null,"91c3b422",null),T=k.exports,E=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"casino container"},[t("p",[e._v("=💰===💰💰===💰💰===💰💰===💰💰===💰💰===💰💰===💰💰===💰=")]),t("h1",[e._v("Welcome to the Casino 欢迎来到CKBet")]),t("p",[e._v("=💰===💰💰===💰💰===💰💰===💰💰===💰💰===💰💰===💰💰===💰=")]),t("h4",[e._v("First: Enter amount of ckb you want to bet💵")]),t("h3",[e._v("Amount to bet: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{placeholder:"0 ckb"},domProps:{value:e.amount},on:{input:function(n){n.target.composing||(e.amount=n.target.value)}}})]),t("h4",[e._v("Then: ⬇️⬇️⬇️ pick a number between 1 and 10, and good lock! ⬇️⬇️⬇️")]),t("ul",[t("li",{on:{click:e.clickNumber}},[e._v("1")]),t("li",{on:{click:e.clickNumber}},[e._v("2")]),t("li",{on:{click:e.clickNumber}},[e._v("3")]),t("li",{on:{click:e.clickNumber}},[e._v("4")]),t("li",{on:{click:e.clickNumber}},[e._v("5")]),t("li",{on:{click:e.clickNumber}},[e._v("6")]),t("li",{on:{click:e.clickNumber}},[e._v("7")]),t("li",{on:{click:e.clickNumber}},[e._v("8")]),t("li",{on:{click:e.clickNumber}},[e._v("9")]),t("li",{on:{click:e.clickNumber}},[e._v("10")])]),e.pending?t("p",[e._v(" 正在投骰子中🎲🎲🎲🎲 ")]):e._e(),e.pending?t("img",{attrs:{id:"loader",src:"https://media.giphy.com/media/Y2ZUWLrTy63j9T6qrK/giphy.gif"}}):e._e(),e.winEvent?t("div",{staticClass:"event"},[e.winEvent._status?t("p",{attrs:{id:"has-won"}},[t("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),e._v(" 🎉🎉Congragulations, you have won "+e._s(e.winEvent._amount/1e8)+" CKB")]):t("p",{attrs:{id:"has-lost"}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),e._v(" 🤪🤪Sorry you lost, try again 🙌🙌 ")])]):e._e()])},A=[],I={name:"casino",data:function(){return{amount:null,pending:!1,winEvent:null}},methods:{clickNumber:function(e){var n=this;console.log("BETTING ON NUMBER, AMOUNT",e.target.innerHTML,this.amount),this.winEvent=null,this.pending=!0,this.$store.state.contractInstance().methods.bet(e.target.innerHTML).send({gas:6e6,value:1e8*this.amount,from:this.$store.state.web3.coinbase}).on("receipt",(function(e){console.log(e),n.pending=!1,console.log("Receipt"),n.winEvent=e.events.Won.returnValues})).on("error",(function(e){console.error(e),n.pending=!1,alert("Network error, please try again")}))}},mounted:function(){console.log("dispatching getContractInstance"),this.$store.dispatch("getContractInstance")}},C=I,H=(0,c.Z)(C,E,A,!1,null,"387c9003",null),O=H.exports,x={name:"casino-dapp",beforeCreate:function(){console.log("registerWeb3 Action dispatched from casino-dapp.vue"),this.$store.dispatch("registerWeb3")},components:{"hello-metamask":T,"casino-component":O}},M=x,N=(0,c.Z)(M,d,b,!1,null,"1e84c4a3",null),P=N.exports;a.Z.use(p.Z);var W=new p.Z({routes:[{path:"/",name:"casino-dapp",component:P}]}),j={web3:{isInjected:!1,web3Instance:null,networkId:null,coinbase:null,balance:null,error:null,polyJuiceAddress:null,ckETH_balance:null},contractInstance:null,sudtInstance:null},L=j,R=(t(41539),t(3283)),S=t.n(R),B={WEB3_PROVIDER_URL:"http://124.160.125.200:3001/godwoken-testnet-web3-rpc.ckbapp.dev",ROLLUP_TYPE_HASH:"0x4cc2e6526204ae6a2e8fcf12f7ad472f41a1606d5b9624beebd215d780809f6a",ETH_ACCOUNT_LOCK_CODE_HASH:"0xdeec13a7b8e100579541384ccaf4b5223733e4a5483c3aec95ddc4c1d5ea5b22"},D=t(95564),U=new Promise((function(e){var n=B.WEB3_PROVIDER_URL,t={rollupTypeHash:B.ROLLUP_TYPE_HASH,ethAccountLockCodeHash:B.ETH_ACCOUNT_LOCK_CODE_HASH,web3Url:n},a=new D.PolyjuiceHttpProvider(n,t),i=new(S())(a);e({injectedWeb3:!1,web3:function(){return i}})})).then((function(e){return new Promise((function(n){var t=window.ethereum.selectedAddress;console.log(t),e=Object.assign({},e,{coinbase:t}),n(e)}))})).then((function(e){return new Promise((function(n,t){e.web3().eth.getBalance(e.coinbase,(function(a,i){a?t(new Error("Unable to retrieve balance for address: "+e.coinbase)):(e=Object.assign({},e,{balance:i}),n(e))}))}))})),Z=U,$=function(e){console.debug(e);var n=window.ethereum;setInterval((0,f.Z)(regeneratorRuntime.mark((function e(){var n,t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=z.state.web3.polyJuiceAddress,t=z.state.web3.coinbase,e.next=4,z.state.sudtInstance().methods.balanceOf(n).call();case 4:a=e.sent,z.dispatch("pollWeb3",{coinbase:t,balance:z.state.web3.balance,polyJuiceAddress:n,ckETH_balance:a/1e18});case 6:case"end":return e.stop()}}),e)}))),15e3),setInterval((function(){if(n&&z.state.web3.web3Instance){var e=z.state.web3.coinbase,t=z.state.web3.polyJuiceAddress;z.state.web3.web3Instance().eth.getBalance(n.selectedAddress,(function(n,a){n?console.log(n):z.dispatch("pollWeb3",{coinbase:e,balance:parseInt(a,10),polyJuiceAddress:t,ckETH_balance:z.state.web3.ckETH_balance})}))}}),5e3),setInterval((function(){if(n&&z.state.web3.web3Instance){var e=n.selectedAddress,t=(new _.AddressTranslator).ethAddressToGodwokenShortAddress(e);z.dispatch("pollWeb3",{coinbase:e,balance:z.state.web3.balance,polyJuiceAddress:t,ckETH_balance:z.state.web3.ckETH_balance})}}),500)},J=$,F="0x604eD4c60b6d0846e2E403aDa42FE5e3De4d4B8e",K=[{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"houseEdge",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"}],name:"Won",type:"event"}],V="0x5704bf4a134181b4f3C74eaFB4150412F312F629",Y=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"totalSupply_",type:"uint256"},{internalType:"uint256",name:"sudtId_",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"sudtId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],G=new Promise((function(e){var n=B.WEB3_PROVIDER_URL,t={rollupTypeHash:B.ROLLUP_TYPE_HASH,ethAccountLockCodeHash:B.ETH_ACCOUNT_LOCK_CODE_HASH,web3Url:n},a=new D.PolyjuiceHttpProvider(n,t),i=new(S())(a),o=new i.eth.Contract(K,F);console.log(o);var r=new i.eth.Contract(Y,V);e([o,r])})),q=G;a.Z.use(w.ZP);var z=new w.ZP.Store({strict:!0,state:L,mutations:{registerWeb3Instance:function(e,n){console.log("registerWeb3instance Mutation being executed",n);var t=n,a=e.web3;a.coinbase=t.coinbase,a.networkId=t.networkId,a.balance=parseInt(t.balance,10),a.isInjected=t.injectedWeb3,a.web3Instance=t.web3,e.web3=a,J()},pollWeb3Instance:function(e,n){e.web3.coinbase=n.coinbase,e.web3.balance=parseInt(n.balance,10),e.web3.ckETH_balance=n.ckETH_balance,e.web3.polyJuiceAddress=n.polyJuiceAddress},registerContractInstance:function(e,n){console.log("Casino contract instance: ",n),e.contractInstance=function(){return n}},registerSudtContractInstance:function(e,n){console.log("Casino contract instance: ",n),e.sudtInstance=function(){return n}}},actions:{registerWeb3:function(e){var n=e.commit;console.log("registerWeb3 Action being executed"),Z.then((function(e){console.log("committing result to registerWeb3Instance mutation"),n("registerWeb3Instance",e)})).catch((function(e){console.log("error in action registerWeb3",e)}))},pollWeb3:function(e,n){var t=e.commit;t("pollWeb3Instance",n)},getContractInstance:function(e){var n=e.commit;q.then((function(e){console.log(e),n("registerContractInstance",e[0]),n("registerSudtContractInstance",e[1])})).catch((function(e){return console.log(e)}))}}});a.Z.config.productionTip=!1,new a.Z({el:"#app",router:W,store:z,components:{App:l},template:"<App/>"})},5879:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},15100:function(){},27790:function(){},75950:function(){},52361:function(){},94616:function(){},88924:function(){}},n={};function t(a){var i=n[a];if(void 0!==i)return i.exports;var o=n[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.m=e,function(){t.amdO={}}(),function(){var e=[];t.O=function(n,a,i,o){if(!a){var r=1/0;for(l=0;l<e.length;l++){a=e[l][0],i=e[l][1],o=e[l][2];for(var s=!0,c=0;c<a.length;c++)(!1&o||r>=o)&&Object.keys(t.O).every((function(e){return t.O[e](a[c])}))?a.splice(c--,1):(s=!1,o<r&&(r=o));if(s){e.splice(l--,1);var u=i();void 0!==u&&(n=u)}}return n}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[a,i,o]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,a){var i,o,r=a[0],s=a[1],c=a[2],u=0;for(i in s)t.o(s,i)&&(t.m[i]=s[i]);if(c)var l=c(t);for(n&&n(a);u<r.length;u++)o=r[u],t.o(e,o)&&e[o]&&e[o][0](),e[r[u]]=0;return t.O(l)},a=self["webpackChunkckbet"]=self["webpackChunkckbet"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(74784)}));a=t.O(a)})();
//# sourceMappingURL=app-legacy.bbc53f4b.js.map